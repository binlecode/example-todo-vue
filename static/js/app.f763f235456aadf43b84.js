webpackJsonp([1],{"20Zl":function(t,e){},"9M+g":function(t,e){},GcmF:function(t,e){},LYqa:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("qb6w"),o("9M+g");var n=o("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("h1",[this._v("todos")])])}]};var i=o("VU/8")({name:"App"},r,!1,function(t){o("dgjG")},null,null).exports,s=o("/ocq"),a=o("Gu7T"),c=o.n(a),l=o("Xxa5"),d=o.n(l),u=o("exGp"),p=o.n(u),f={name:"Todo",props:{todo:Object},data:function(){return{origTodoTitle:null,inputTodoTitle:this.todo.title}},computed:{inputTodo:{get:function(){return this.todo.title}}},methods:{editTodo:function(){this.origTodoTitle=this.todo.title,this.$emit("edit-todo",this.todo)},doneEditTodo:function(){console.log("input todo title: "+this.inputTodoTitle),this.$emit("done-edit-todo",{id:this.todo.id,title:this.inputTodoTitle}),this.origTodoTitle=null},cancelEditTodo:function(){this.$emit("cancel-edit-todo",{id:this.todo.id,origTitle:this.origTodoTitle}),this.inputTodoTitle=this.origTodoTitle,this.origTodoTitle=null}},directives:{"todo-focus":function(t,e){e.value&&t.focus()}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("div",{staticClass:"view"},[o("label",{staticClass:"checkbox-label",attrs:{for:"cb-"+t.todo.id}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.completed,expression:"todo.completed"}],attrs:{id:"cb-"+t.todo.id,type:"checkbox"},domProps:{checked:Array.isArray(t.todo.completed)?t._i(t.todo.completed,null)>-1:t.todo.completed},on:{click:function(e){return t.$emit("toggle-todo-complete",t.todo.id)},change:function(e){var o=t.todo.completed,n=e.target,r=!!n.checked;if(Array.isArray(o)){var i=t._i(o,null);n.checked?i<0&&t.$set(t.todo,"completed",o.concat([null])):i>-1&&t.$set(t.todo,"completed",o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.todo,"completed",r)}}}),t._v(" "),o("span",{staticClass:"checkmark"})]),t._v(" "),o("p",{staticClass:"todo-details"},[o("span",{class:{completed:t.todo.completed},on:{dblclick:t.editTodo}},[t._v(t._s(t.todo.title))]),t._v(" "),t.todo.tags?o("span",[t._v("\n        |\n        "),t._l(t.todo.tags,function(e){return o("span",{key:e},[o("a",{attrs:{href:"#"}},[o("span",{staticClass:"badge"},[t._v(t._s(e))])]),t._v("\n          |\n        ")])})],2):t._e()]),t._v(" "),o("span",{staticClass:"pull-right"},[o("button",{staticClass:"btn btn-xs btn-outline-danger btn-rm-todo",on:{click:function(e){return t.$emit("delete-todo",t.todo.id)}}},[t._v("\n      x\n      ")])])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputTodoTitle,expression:"inputTodoTitle",modifiers:{trim:!0}},{name:"todo-focus",rawName:"v-todo-focus",value:null!=t.origTodoTitle,expression:"origTodoTitle != null"}],staticClass:"edit",attrs:{type:"text"},domProps:{value:t.inputTodoTitle},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doneEditTodo(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEditTodo(e)}],input:function(e){e.target.composing||(t.inputTodoTitle=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])},staticRenderFns:[]};var v=o("VU/8")(f,h,!1,function(t){o("LYqa")},null,null).exports,m=o("//Fk"),g=o.n(m),T=o("mtWM"),x=o.n(T),w=o("kFye"),k=(o("20Zl"),o("YxSy")),b=o.n(k),_="http://localhost:3000/todos",y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";return b.a.error({title:e,message:t,position:"topCenter"})};x.a.interceptors.response.use(void 0,function(t){return console.log("API error: "+t),t.response&&(console.log("API error response: "+t.response),t.response.status&&console.log("API error status: "+t.response.status)),y("API Error: "+t),g.a.reject(t)});var C={listTodos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(d.a.mark(function o(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n in t.prev=0,console.log("Api list todos with params:"),e)console.log(n+" => "+e[n]);return t.next=5,x.a.get(_,{params:e});case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},o,t,[[0,8]])}))()},insertTodo:function(t){var e=this;return p()(d.a.mark(function o(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(_,{id:Object(w.a)(),title:t.title,completed:t.completed});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}},o,e,[[0,7]])}))()},patchTodo:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p()(d.a.mark(function n(){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},o.title&&(r.title=o.title),null!=o.completed&&(r.completed=o.completed),e.prev=3,e.next=6,x.a.patch(_+"/"+t,r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}},n,e,[[3,8]])}))()},deleteTodo:function(t){var e=this;return p()(d.a.mark(function o(){var n,r;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("msg delete-todo: "+t),o.prev=1,o.next=4,x.a.delete(_+"/"+t);case 4:if(n=o.sent,console.log("delete successful: "+n.status),!(n.status>200)){o.next=9;break}return console.log("Deletion error: "+n.status),o.abrupt("return");case 9:return o.next=11,x.a.get(_);case 11:r=o.sent,e.todos=r.data,o.next=18;break;case 15:o.prev=15,o.t0=o.catch(1),console.log(o.t0);case 18:case"end":return o.stop()}},o,e,[[1,15]])}))()}},E=o("mvHQ"),M=o.n(E),O=o("BO1k"),A=o.n(O),N={listTodos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(d.a.mark(function o(){var n,r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=P(),!e.q){t.next=4;break}return r=n.filter(function(t){return t.title.toLowerCase().includes(e.q.toLowerCase())}),t.abrupt("return",g.a.resolve({data:r,headers:{"x-total-count":r.length}}));case 4:return t.abrupt("return",g.a.resolve({data:n,headers:{"x-total-count":n.length}}));case 5:case"end":return t.stop()}},o,t)}))()},insertTodo:function(t){var e=this;return p()(d.a.mark(function o(){var n,r,i,s,a,c,l,u;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=P(),r={id:Object(w.a)(),title:t.title,completed:t.completed},n.unshift(r),i=!0,s=!1,a=void 0,e.prev=6,c=A()(n);!(i=(l=c.next()).done);i=!0)u=l.value,console.log("ls todo id: "+u.id);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),s=!0,a=e.t0;case 14:e.prev=14,e.prev=15,!i&&c.return&&c.return();case 17:if(e.prev=17,!s){e.next=20;break}throw a;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return $(n),e.abrupt("return",g.a.resolve({data:r}));case 24:case"end":return e.stop()}},o,e,[[6,10,14,22],[15,,17,21]])}))()},patchTodo:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p()(d.a.mark(function n(){var r,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P(),i=r.find(function(e){return e.id===t})){e.next=4;break}return e.abrupt("return",g.a.reject(new Error("todo not round by id"+t)));case 4:return o.title&&(i.title=o.title),null!=o.completed&&(i.completed=o.completed),$(r),e.abrupt("return",g.a.resolve({data:i}));case 8:case"end":return e.stop()}},n,e)}))()},deleteTodo:function(t){var e=this;return p()(d.a.mark(function o(){var n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=P(),r=n.filter(function(e){return e.id!==t}),$(r),e.abrupt("return",g.a.resolve(null));case 4:case"end":return e.stop()}},o,e)}))()}},P=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).reset?$(q):null==JSON.parse(localStorage.getItem("todos"))&&$(q);return JSON.parse(localStorage.getItem("todos"))},$=function(t){localStorage.setItem("todos",M()(t))},q=[{id:1,title:"Take a nap",completed:!1},{id:2,title:"Brew a cup of coffee",completed:!0},{id:3,title:"Water plants"},{id:4,title:"Make a call to a friend"},{id:5,title:"Watch a favorite movie"},{id:6,title:"Take a nap",completed:!0},{id:7,title:"Run for 3 miles"},{id:8,title:"Attend a concert or ballet show"}];console.log("process.env.CRUD_API = "+Object({NODE_ENV:"production"}).CRUD_API);var I="REST"===Object({NODE_ENV:"production"}).CRUD_API?C:N,S={name:"todoList",components:{Todo:v},computed:{filteredTodos:function(){return"active"===this.visibility?this.todos.filter(function(t){return!0!==t.completed}):"completed"===this.visibility?this.todos.filter(function(t){return!0===t.completed}):this.todos}},props:{},data:function(){return{imgUrl:"https://source.unsplash.com/1024x768/?coffee",imgCategories:["office","nature","travel","food","space","tennis"],visibility:"all",newTodo:"",searchMode:!1,editedTodo:null,todos:[],total:0,listOptions:{page:1,limit:6,sort:"createdAt",order:"desc"}}},created:function(){this.listTodos()},methods:{changeBgPic:function(t){var e=Math.floor(Math.random()*this.imgCategories.length);console.log("change bg pic to category: "+this.imgCategories[e]),this.imgUrl="https://source.unsplash.com/1024x768/?"+this.imgCategories[e]},setVisibility:function(t){this.visibility=t},editTodo:function(t){this.editedTodo=t},cancelEditTodo:function(t){this.editedTodo=null},toggleSearchMode:function(t){this.searchMode=!this.searchMode,this.$refs.inputTextBar.focus()},onTextBarInputEnter:function(t){console.log("catch text bar enter, search mode: "+this.searchMode),this.searchMode?this.searchTodoNew():this.addTodo()},onPgChange:function(t){console.log("changing page to "+t),this.listOptions.page=t,this.searchMode?this.searchTodo():this.listTodos()},searchTodoNew:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(d.a.mark(function o(){return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t.listOptions.page=1,o.next=3,t.searchTodo(e);case 3:case"end":return o.stop()}},o,t)}))()},searchTodo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(d.a.mark(function o(){return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("searching todo with q: "+t.newTodo),e.q=t.newTodo,o.next=4,t.listTodos(e);case 4:case"end":return o.stop()}},o,t)}))()},listTodos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(d.a.mark(function o(){var n,r,i;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(r in n={_limit:e.limit||t.listOptions.limit,_page:e.page||t.listOptions.page,_sort:e.sort||t.listOptions.sort,_order:e.order||t.listOptions.order},e.q&&(n.q=e.q),console.log("list todos with params:"),n)console.log(r+" => "+n[r]);return o.next=6,I.listTodos(n);case 6:i=o.sent,t.todos=i.data,t.total=i.headers["x-total-count"];case 9:case"end":return o.stop()}},o,t)}))()},addTodo:function(){var t=this;return p()(d.a.mark(function e(){var o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.newTodo){e.next=6;break}return e.next=3,I.insertTodo({title:t.newTodo,completed:!1});case 3:(o=e.sent)&&(t.todos=[o.data].concat(c()(t.todos)),t.total+=1),t.newTodo="";case 6:case"end":return e.stop()}},e,t)}))()},toggleTodoComplete:function(t){var e=this;return p()(d.a.mark(function o(){var n;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("toggle todo: "+t),(n=e.todos.find(function(e){return e.id===t})).completed=!n.completed,o.next=5,I.patchTodo(t,{completed:n.completed});case 5:case"end":return o.stop()}},o,e)}))()},doneEditTodo:function(t){var e=this;return p()(d.a.mark(function o(){var n;return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("update todo "+t.id+" with title: "+t.title),(n=e.todos.find(function(e){return e.id===t.id})).title=t.title,o.next=5,I.patchTodo(n.id,{title:n.title});case 5:e.editedTodo=null;case 6:case"end":return o.stop()}},o,e)}))()},deleteTodo:function(t){var e=this;return p()(d.a.mark(function o(){return d.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,I.deleteTodo(t);case 2:return o.next=4,e.listTodos();case 4:case"end":return o.stop()}},o,e)}))()},clearCompleted:function(){},clearAll:function(){}}},j={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{style:{"background-image":"url("+t.imgUrl+") "},attrs:{id:"cover"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-5 col-lg-6 col-md-8 col-sm-10 mx-auto form p-4 todo-form text-white"},[o("div",{staticClass:"input-group-lg",attrs:{id:"todo-text-bar"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodo,expression:"newTodo"}],ref:"inputTextBar",staticClass:"form-control",attrs:{type:"text",name:"title",placeholder:this.searchMode?"Search Todo":"Enter New Todo"},domProps:{value:t.newTodo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onTextBarInputEnter(e)},input:function(e){e.target.composing||(t.newTodo=e.target.value)}}}),t._v(" "),o("a",{staticClass:"search-icon",class:{"search-mode":this.searchMode},attrs:{href:"#"},on:{click:t.toggleSearchMode}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchMode,expression:"searchMode"}],staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.searchMode)?t._i(t.searchMode,null)>-1:t.searchMode},on:{change:function(e){var o=t.searchMode,n=e.target,r=!!n.checked;if(Array.isArray(o)){var i=t._i(o,null);n.checked?i<0&&(t.searchMode=o.concat([null])):i>-1&&(t.searchMode=o.slice(0,i).concat(o.slice(i+1)))}else t.searchMode=r}}}),t._v(" "),o("b-icon-search")],1)]),t._v(" "),o("div",[o("ul",{staticClass:"todo-list",attrs:{id:"todo-list"}},t._l(t.filteredTodos,function(e){return o("li",{key:e.id,staticClass:"list-group-item",class:{editing:e==t.editedTodo}},[o("Todo",{attrs:{todo:e},on:{"delete-todo":t.deleteTodo,"toggle-todo-complete":t.toggleTodoComplete,"edit-todo":t.editTodo,"done-edit-todo":t.doneEditTodo,"cancel-edit-todo":t.cancelEditTodo}})],1)}),0)]),t._v(" "),t.total>t.listOptions.limit?o("div",{staticClass:"overflow-auto"},[o("b-pagination",{staticStyle:{background:"transparent"},attrs:{id:"todo-pagination","total-rows":t.total,"per-page":t.listOptions.limit,"aria-controls":"todo-list",align:"fill"},on:{change:t.onPgChange},model:{value:t.listOptions.page,callback:function(e){t.$set(t.listOptions,"page",e)},expression:"listOptions.page"}})],1):t._e(),t._v(" "),o("footer",{staticClass:"footer"},[o("ul",{staticClass:"filters"},[o("li",[o("a",{class:{selected:"all"==t.visibility},attrs:{href:"#"},on:{click:function(e){return t.setVisibility("all")}}},[t._v("All")])]),t._v(" "),o("li",[o("a",{class:{selected:"active"==t.visibility},attrs:{href:"#"},on:{click:function(e){return t.setVisibility("active")}}},[t._v("Active")])]),t._v(" "),o("li",[o("a",{class:{selected:"completed"==t.visibility},attrs:{href:"#"},on:{click:function(e){return t.setVisibility("completed")}}},[t._v("Completed")])]),t._v(" "),o("li",{staticClass:"change-bg"},[o("a",{attrs:{href:"#"},on:{click:t.changeBgPic}},[t._v("bg")])])])])])])])])},staticRenderFns:[]};var U=o("VU/8")(S,j,!1,function(t){o("GcmF")},null,null).exports;n.default.use(s.a);var V=new s.a({routes:[{path:"/",name:"ExampleTodo",component:U}]}),B=o("Tqaz");n.default.use(B.a),n.default.use(B.b),n.default.config.productionTip=!1,new n.default({el:"#app",router:V,components:{App:i},template:"<App/>"})},dgjG:function(t,e){},qb6w:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f763f235456aadf43b84.js.map